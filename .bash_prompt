#!/bin/bash

# Lightweight git branch helper for prompt
function prompt_git(){
  local branchName=''
  branchName="$(git branch 2> /dev/null)"
  if [ $? -eq 0 ] ; then
		branchName=$(echo "$branchName" | grep '\*' | cut -c 3-)
		echo "${1}á›˜ ${branchName}"
	fi
}

# in a function to avoid env pollution
set_bash_prompt() {
	# wrapped for non-printing characters
	local PROMPT_RESET="\[\e[0m\]"
	local PROMPT_BOLD="\[\e[1m\]"
	local PROMPT_RED="\[\e[31m\]"
	local PROMPT_GREEN="\[\e[32m\]"
	local PROMPT_YELLOW="\[\e[33m\]"
	local PROMPT_BLUE="\[\e[34m\]"
	local PROMPT_MAGENTA="\[\e[35m\]"
	local PROMPT_WHITE="\[\e[37m\]"
	local PROMPT_BOLD_GREEN="\[\033[01;32m\]"
	local PROMPT_BOLD_BLUE="\[\033[01;34m\]"
	local PROMPT_BOLD_WHITE="\[\033[01;37m\]"
	local PROMPT_RESET_ALT="\[\033[00m\]"

	### (arch rainbow)
	# [brendan@host ~]$
	# PS1="${PROMPT_BOLD}${PROMPT_RED}[${PROMPT_YELLOW}\u${PROMPT_GREEN}@${PROMPT_BLUE}\h ${PROMPT_MAGENTA}\W\$(prompt_git \"${PROMPT_WHITE} on ${PROMPT_GREEN}\")${PROMPT_RED}]${PROMPT_WHITE}$${PROMPT_RESET} "

	### (pi3 rainbow)
	# [brendan@host ~]$
	# PS1="${PROMPT_BOLD}${PROMPT_BLUE}[${PROMPT_YELLOW}\u${PROMPT_GREEN}@${PROMPT_RED}\h ${PROMPT_MAGENTA}\W\$(prompt_git \"${PROMPT_WHITE} on ${PROMPT_GREEN}\")${PROMPT_BLUE}]${PROMPT_WHITE}$ ${PROMPT_RESET}"

	### (minimalist newline)
	# [ brendan ~ ]
	#  $
	# PS1="[ \u ${PROMPT_YELLOW}\w${PROMPT_RESET} ]\$(prompt_git \"${PROMPT_WHITE} on ${PROMPT_GREEN}\")${PROMPT_RESET}\n \\$ ${PROMPT_RESET}"

	### (rainbow newline)
	# [brendan@host] ~ on master
	#  $
	# PS1="${PROMPT_BOLD}${PROMPT_BLUE}[${PROMPT_YELLOW}\u${PROMPT_WHITE}@${PROMPT_RED}\h${PROMPT_BLUE}]${PROMPT_WHITE} ${PROMPT_GREEN}\w\$(prompt_git \"${PROMPT_WHITE} on ${PROMPT_MAGENTA}\")${PROMPT_RESET}\n ${PROMPT_BOLD_WHITE}\$ ${PROMPT_RESET}"

	### (manjaro-style green)
	# [brendan@manjarohp Documents]$
	# PS1="${PROMPT_BOLD_GREEN}[\u@\h${PROMPT_BOLD_WHITE} \W${PROMPT_BOLD_GREEN}]\$${PROMPT_RESET_ALT} "

	### (bootstrap subtle)
	# [brendan@server ~ on master]$
	# PS1="${PROMPT_BLUE}[${PROMPT_RESET}${PROMPT_WHITE}\u${PROMPT_BLUE}@${PROMPT_WHITE}\h ${PROMPT_MAGENTA}\W\$(prompt_git \"${PROMPT_WHITE} on ${PROMPT_GREEN}\")${PROMPT_BLUE}]${PROMPT_WHITE}$ ${PROMPT_RESET}"

	### (minimal)
	# user ~/dir on master
	#  $
	# PS1="${PROMPT_BLUE}\u ${PROMPT_MAGENTA}\W\$(prompt_git \"${PROMPT_WHITE} on ${PROMPT_GREEN}\")${PROMPT_RESET}\n ${PROMPT_BOLD_WHITE}$ ${PROMPT_RESET}"
}

set_bash_prompt
unset -f set_bash_prompt
